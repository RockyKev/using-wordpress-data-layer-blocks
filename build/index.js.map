{"version":3,"file":"index.js","mappings":";;;;;;;;;;AAAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;;;;;;;;;;;;ACN2F;AACrC;AACG;AACK;AACJ;;AAE1D;AACA,SAASY,UAAUA,CAAA,EAAG;EACpB,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGT,4DAAQ,CAAC,EAAE,CAAC;;EAEhD;EACA,MAAM;IAAEU,KAAK;IAAEC;EAAY,CAAC,GAAGT,0DAAS,CACrCU,MAAM,IAAK;IACV,MAAMC,KAAK,GAAG,CAAC,CAAC;IAEhB,IAAIL,UAAU,EAAE;MACdK,KAAK,CAACC,MAAM,GAAGN,UAAU;IAC3B;IAEA,MAAMO,iBAAiB,GAAG,CAAC,UAAU,EAAE,MAAM,EAAEF,KAAK,CAAC;;IAErD;IACA,MAAMG,QAAQ,GAAG;MACfN,KAAK,EAAEE,MAAM,CAACP,uDAAa,CAAC,CAACY,gBAAgB,CAAC,GAAGF,iBAAiB,CAAC;MACnEJ,WAAW,EAAEC,MAAM,CAACP,uDAAa,CAAC,CAACa,qBAAqB,CAAC,kBAAkB,EAAEH,iBAAiB;IAChG,CAAC;IAED,OAAOC,QAAQ;EACjB,CAAC,EACD,CAACR,UAAU,CACb,CAAC;;EAED;EACA,OACEW,iEAAA,cACEA,iEAAA,CAACrB,gEAAa;IAACsB,QAAQ,EAAEX,aAAc;IAACY,KAAK,EAAEb;EAAW,CAAE,CAAC,EAC7DW,iEAAA,CAACG,QAAQ;IAACX,WAAW,EAAEA,WAAY;IAACD,KAAK,EAAEA;EAAM,CAAE,CAChD,CAAC;AAEV;AAEO,SAASa,YAAYA,CAAAC,IAAA,EAAuC;EAAA,IAAtC;IAAEC,MAAM;IAAEC,QAAQ;IAAEC;EAAe,CAAC,GAAAH,IAAA;EAC/D;EACA;EACA;EACA;;EAEA;EACA,MAAM;IAAEI,QAAQ;IAAEC,QAAQ;IAAEC,SAAS;IAAEC;EAAK,CAAC,GAAG7B,0DAAS,CACtDU,MAAM,KAAM;IACTmB,IAAI,EAAEnB,MAAM,CAACP,uDAAa,CAAC,CAAC2B,qBAAqB,CAAC,UAAU,EAAE,MAAM,EAAEP,MAAM,CAAC;IAC7EK,SAAS,EAAElB,MAAM,CAACP,uDAAa,CAAC,CAAC4B,sBAAsB,CAAC,UAAU,EAAE,MAAM,EAAER,MAAM,CAAC;IACnFG,QAAQ,EAAEhB,MAAM,CAACP,uDAAa,CAAC,CAAC6B,oBAAoB,CAAC,UAAU,EAAE,MAAM,EAAET,MAAM,CAAC;IAChFI,QAAQ,EAAEjB,MAAM,CAACP,uDAAa,CAAC,CAAC8B,uBAAuB,CAAC,UAAU,EAAE,MAAM,EAAEV,MAAM;EACtF,CAAC,CAAC,EACF,CAACA,MAAM,CACT,CAAC;EAID,MAAM;IAAEW,sBAAsB;IAAEC;EAAiB,CAAC,GAAGlC,4DAAW,CAACE,uDAAa,CAAC;;EAE/E;EACA,MAAMiC,YAAY,GAAIC,KAAK,IAAKF,gBAAgB,CAAC,UAAU,EAAE,MAAM,EAAEZ,MAAM,EAAE;IAAEc;EAAM,CAAC,CAAC;;EAErF;EACF,MAAMC,UAAU,GAAG,MAAAA,CAAA,KAAY;IAC7B,MAAMC,WAAW,GAAG,MAAML,sBAAsB,CAAC,UAAU,EAAE,MAAM,EAAEX,MAAM,CAAC;IAC5E,IAAIgB,WAAW,EAAE;MACbd,cAAc,CAAC,CAAC;IACpB;EACF,CAAC;EAED,OACER,iEAAA;IAAKuB,SAAS,EAAC;EAAmB,GAChCvB,iEAAA,CAACvB,8DAAW;IAAC+C,KAAK,EAAC,aAAa;IAACtB,KAAK,EAAEU,IAAI,CAACQ,KAAM;IAACnB,QAAQ,EAAEkB;EAAa,CAAE,CAAC,EAE9EnB,iEAAA,CAAAyB,wDAAA,QAAGd,SAAS,GAAGX,iEAAA;IAAKuB,SAAS,EAAC;EAAY,GAAC,SAAO,EAACZ,SAAS,CAACe,OAAa,CAAC,GAAG,KAAQ,CAAC,EAEvF1B,iEAAA;IAAKuB,SAAS,EAAC;EAAc,GAC3BvB,iEAAA,CAACxB,yDAAM;IAACmD,OAAO,EAAEN,UAAW;IAACO,OAAO,EAAC,SAAS;IAACC,QAAQ,EAAE,CAACnB,QAAQ,IAAID;EAAS,GAC5EA,QAAQ,GACPT,iEAAA,CAAAyB,wDAAA,QACEzB,iEAAA,CAACpB,0DAAO,MAAE,CAAC,aAEX,CAAC,GACD,MACE,CAAC,EACToB,iEAAA,CAACxB,yDAAM;IAACmD,OAAO,EAAEpB,QAAS;IAACqB,OAAO,EAAC;EAAU,GAAC,QAEtC,CACL,CACF,CAAC;AAEV;;AAEA;;AAEA,SAASE,cAAcA,CAAAC,KAAA,EAAa;EAAA,IAAZ;IAAEzB;EAAO,CAAC,GAAAyB,KAAA;EAChC,MAAM,CAACC,MAAM,EAAEC,OAAO,CAAC,GAAGpD,4DAAQ,CAAC,KAAK,CAAC;EACzC,MAAMqD,SAAS,GAAGA,CAAA,KAAMD,OAAO,CAAC,IAAI,CAAC;EACrC,MAAME,UAAU,GAAGA,CAAA,KAAMF,OAAO,CAAC,KAAK,CAAC;EAEvC,OACEjC,iEAAA,CAAAyB,wDAAA,QACEzB,iEAAA,CAACxB,yDAAM;IAACmD,OAAO,EAAEO,SAAU;IAACN,OAAO,EAAC;EAAS,GAAC,MAEtC,CAAC,EACRI,MAAM,IACLhC,iEAAA,CAACtB,wDAAK;IAAC0D,cAAc,EAAED,UAAW;IAACf,KAAK,EAAC;EAAW,GAClDpB,iEAAA,CAACI,YAAY;IAACE,MAAM,EAAEA,MAAO;IAACC,QAAQ,EAAE4B,UAAW;IAAC3B,cAAc,EAAE2B;EAAW,CAAE,CAC5E,CAET,CAAC;AAEP;AAEA,SAAShC,QAAQA,CAAAkC,KAAA,EAAyB;EAAA,IAAxB;IAAE7C,WAAW;IAAED;EAAM,CAAC,GAAA8C,KAAA;EACtC,IAAI,CAAC7C,WAAW,EAAE;IAChB,OAAOQ,iEAAA,CAACpB,0DAAO,MAAE,CAAC;EACpB;EAEA,IAAI,CAACW,KAAK,EAAE+C,MAAM,EAAE;IAClB,OAAOtC,iEAAA,cAAK,YAAe,CAAC;EAC9B;EAEA,OACEA,iEAAA;IAAOuB,SAAS,EAAC;EAAqD,GACpEvB,iEAAA,gBACEA,iEAAA,aACEA,iEAAA,aAAI,OAAS,CAAC,EACdA,iEAAA;IAAIuC,KAAK,EAAE;MAAEC,KAAK,EAAE;IAAI;EAAE,GAAC,SAAW,CACpC,CACC,CAAC,EACRxC,iEAAA,gBACGT,KAAK,EAAEkD,GAAG,CAAE7B,IAAI,IACfZ,iEAAA;IAAI0C,GAAG,EAAE9B,IAAI,CAAC+B;EAAG,GACf3C,iEAAA,aAAKb,wEAAc,CAACyB,IAAI,CAACQ,KAAK,CAACwB,QAAQ,CAAM,CAAC,EAC9C5C,iEAAA,aACEA,iEAAA,CAAC8B,cAAc;IAACxB,MAAM,EAAEM,IAAI,CAAC+B;EAAG,CAAE,CAChC,CACF,CACL,CACI,CACF,CAAC;AAEZ;AAEAE,MAAM,CAACC,gBAAgB,CACrB,MAAM,EACN,MAAM;EACJhE,0DAAM,CAACkB,iEAAA,CAACZ,UAAU,MAAE,CAAC,EAAE2D,QAAQ,CAACC,aAAa,CAAC,yBAAyB,CAAC,CAAC;AAC3E,CAAC,EACD,KACF,CAAC,C","sources":["webpack://my-first-gutenberg-app/external window [\"wp\",\"components\"]","webpack://my-first-gutenberg-app/external window [\"wp\",\"coreData\"]","webpack://my-first-gutenberg-app/external window [\"wp\",\"data\"]","webpack://my-first-gutenberg-app/external window [\"wp\",\"element\"]","webpack://my-first-gutenberg-app/external window [\"wp\",\"htmlEntities\"]","webpack://my-first-gutenberg-app/webpack/bootstrap","webpack://my-first-gutenberg-app/webpack/runtime/compat get default export","webpack://my-first-gutenberg-app/webpack/runtime/define property getters","webpack://my-first-gutenberg-app/webpack/runtime/hasOwnProperty shorthand","webpack://my-first-gutenberg-app/webpack/runtime/make namespace object","webpack://my-first-gutenberg-app/./src/index.js"],"sourcesContent":["module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"coreData\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"htmlEntities\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { Button, TextControl, Modal, SearchControl, Spinner } from \"@wordpress/components\";\r\nimport { useState, render } from \"@wordpress/element\";\r\nimport { useSelect, useDispatch } from \"@wordpress/data\";\r\nimport { store as coreDataStore } from \"@wordpress/core-data\";\r\nimport { decodeEntities } from \"@wordpress/html-entities\";\r\n\r\n// TODO: rename this\r\nfunction MyFirstApp() {\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n\r\n  // Getting the search request and passing the data back\r\n  const { pages, hasResolved } = useSelect(\r\n    (select) => {\r\n      const query = {};\r\n\r\n      if (searchTerm) {\r\n        query.search = searchTerm;\r\n      }\r\n\r\n      const selectorArguments = [\"postType\", \"page\", query];\r\n\r\n      // making the requests to the WP store\r\n      const response = {\r\n        pages: select(coreDataStore).getEntityRecords(...selectorArguments),\r\n        hasResolved: select(coreDataStore).hasFinishedResolution(\"getEntityRecords\", selectorArguments),\r\n      };\r\n\r\n      return response;\r\n    },\r\n    [searchTerm]\r\n  );\r\n\r\n  // the markup\r\n  return (\r\n    <div>\r\n      <SearchControl onChange={setSearchTerm} value={searchTerm} />\r\n      <PageList hasResolved={hasResolved} pages={pages} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function EditPageForm({ pageId, onCancel, onSaveFinished }) {\r\n  // three steps\r\n  // 1 - get the content\r\n  // 2 - create a 'edit' state.\r\n  // 3 - create a 'save the edit' state\r\n\r\n  // get the content and any errors involved\r\n  const { isSaving, hasEdits, lastError, page } = useSelect(\r\n    (select) => ({\r\n        page: select(coreDataStore).getEditedEntityRecord(\"postType\", \"page\", pageId),\r\n        lastError: select(coreDataStore).getLastEntitySaveError(\"postType\", \"page\", pageId),\r\n        isSaving: select(coreDataStore).isSavingEntityRecord(\"postType\", \"page\", pageId),\r\n        hasEdits: select(coreDataStore).hasEditsForEntityRecord(\"postType\", \"page\", pageId),\r\n    }),\r\n    [pageId]\r\n  );\r\n\r\n\r\n\r\n  const { saveEditedEntityRecord, editEntityRecord } = useDispatch(coreDataStore);\r\n\r\n  // Make the edits\r\n  const handleChange = (title) => editEntityRecord(\"postType\", \"page\", pageId, { title });\r\n\r\n    // save the edits\r\n  const handleSave = async () => {\r\n    const savedRecord = await saveEditedEntityRecord(\"postType\", \"page\", pageId);\r\n    if (savedRecord) {\r\n        onSaveFinished();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"my-gutenberg-form\">\r\n      <TextControl label=\"Page title:\" value={page.title} onChange={handleChange} />\r\n\r\n      <>{lastError ? <div className=\"form-error\">Error: {lastError.message}</div> : false}</>\r\n\r\n      <div className=\"form-buttons\">\r\n        <Button onClick={handleSave} variant=\"primary\" disabled={!hasEdits || isSaving}>\r\n          {isSaving ? (\r\n            <>\r\n              <Spinner />\r\n              Saving...\r\n            </>\r\n          ) : 'Save' }\r\n        </Button>\r\n        <Button onClick={onCancel} variant=\"tertiary\">\r\n          Cancel\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// const PageEditButton = () => <Button variant=\"primary\">Edit</Button>;\r\n\r\nfunction PageEditButton({ pageId }) {\r\n  const [isOpen, setOpen] = useState(false);\r\n  const openModal = () => setOpen(true);\r\n  const closeModal = () => setOpen(false);\r\n\r\n  return (\r\n    <>\r\n      <Button onClick={openModal} variant=\"primary\">\r\n        Edit\r\n      </Button>\r\n      {isOpen && (\r\n        <Modal onRequestClose={closeModal} title=\"Edit page\">\r\n          <EditPageForm pageId={pageId} onCancel={closeModal} onSaveFinished={closeModal} />\r\n        </Modal>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nfunction PageList({ hasResolved, pages }) {\r\n  if (!hasResolved) {\r\n    return <Spinner />;\r\n  }\r\n\r\n  if (!pages?.length) {\r\n    return <div>No results</div>;\r\n  }\r\n\r\n  return (\r\n    <table className=\"wp-list-table widefat fixed striped table-view-list\">\r\n      <thead>\r\n        <tr>\r\n          <td>Title</td>\r\n          <td style={{ width: 120 }}>Actions</td>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {pages?.map((page) => (\r\n          <tr key={page.id}>\r\n            <td>{decodeEntities(page.title.rendered)}</td>\r\n            <td>\r\n              <PageEditButton pageId={page.id} />\r\n            </td>\r\n          </tr>\r\n        ))}\r\n      </tbody>\r\n    </table>\r\n  );\r\n}\r\n\r\nwindow.addEventListener(\r\n  \"load\",\r\n  () => {\r\n    render(<MyFirstApp />, document.querySelector(\"#my-first-gutenberg-app\"));\r\n  },\r\n  false\r\n);\r\n"],"names":["Button","TextControl","Modal","SearchControl","Spinner","useState","render","useSelect","useDispatch","store","coreDataStore","decodeEntities","MyFirstApp","searchTerm","setSearchTerm","pages","hasResolved","select","query","search","selectorArguments","response","getEntityRecords","hasFinishedResolution","createElement","onChange","value","PageList","EditPageForm","_ref","pageId","onCancel","onSaveFinished","isSaving","hasEdits","lastError","page","getEditedEntityRecord","getLastEntitySaveError","isSavingEntityRecord","hasEditsForEntityRecord","saveEditedEntityRecord","editEntityRecord","handleChange","title","handleSave","savedRecord","className","label","Fragment","message","onClick","variant","disabled","PageEditButton","_ref2","isOpen","setOpen","openModal","closeModal","onRequestClose","_ref3","length","style","width","map","key","id","rendered","window","addEventListener","document","querySelector"],"sourceRoot":""}